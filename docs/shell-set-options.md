# Shell 脚本错误处理选项说明

`set -Eeuo pipefail` 是一组 shell 脚本的严格模式选项，用于增强脚本的错误处理能力。每个选项的具体含义如下：

## 选项说明

### `-e`
- 如果命令返回非零状态（错误），立即退出脚本
- 这可以防止错误被忽略，脚本继续执行
- 相当于在每个命令后添加 `|| exit $?`

### `-E`
- 与 `-e` 配合使用
- 确保 ERR 陷阱被 shell 函数、命令替换和子 shell 中执行的命令继承
- 使错误处理更加一致和可靠

### `-u`
- 当使用未定义的变量时立即退出
- 可以捕获变量名拼写错误和未初始化变量的使用
- 帮助发现潜在的变量引用错误

### `-o pipefail`
- 使管道命令返回值为最后一个非零返回值
- 默认情况下，管道的返回值是最后一个命令的返回值
- 这个选项可以捕获管道中间命令的错误

## 使用示例

```bash
# 不使用 pipefail
false | true  # 返回值为 0（成功）

# 使用 pipefail
set -o pipefail
false | true  # 返回值为 1（失败）
```

## 注意事项
1. 这些选项会使脚本更加严格，可能需要更多的错误处理代码
2. 在某些情况下可能需要临时禁用这些选项
3. 建议在关键的生产脚本中使用这些选项
4. 对于简单的脚本，可能不需要这么严格的错误处理